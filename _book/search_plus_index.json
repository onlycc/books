{"./":{"url":"./","title":"Introduction","keywords":"","body":"1. 知识库1. 知识库 # 执行脚本 提交文档 bash build.sh By onlycc            updated 2020-12-04 21:44:29 "},"basic/leetcode.html":{"url":"basic/leetcode.html","title":"编码","keywords":"","body":"leetcode学习方法 提升刷题效率的方式： 先掌握基本数据结构和算法； 推荐阅读《大话数据结构》、《啊哈算法》、《图解算法》、《算法导论》等。 写代码不要使用IDE，直接在leetcode上写； 熟练使用各种基本函数，训练自己的写代码速度。 刷题时要按照同类型的刷题，分模块逐个击破。 可以按照一本书，边学习算法思路，学习例题，然后再leetcode上找相关的题进行练习。参考书籍：《程序员面试金典》、《剑指Offer》 每一道题都要精益求精，学习其他人的优秀代码。磨练自己的代码。 参考别人代码学习思路，然后代码完全要自己写出来，并且过一段时间再做还能做出来才是正在的掌握了。 刷题时要总结，记录关键点和易错点，写下关键思路。 每天睡前复习5分钟。 有意识的提高自己的写代码的速度，打字速度。可以通过参加leetcode周赛训练。 培养自己一次性写成无bug代码，思路程序设计。 15分钟没有任何思路，不要死磕，可以参考其他人的思路进行学习。 按照书籍进行学习和刷题，然后通过HOT100和精选200来模拟冲刺。 重点做中等难度的题， HOT100难的也需要掌握。 By onlycc            updated 2020-12-13 20:41:26 "},"network/network.html":{"url":"network/network.html","title":"网络","keywords":"","body":"1. 网络1.1. 推荐书籍1. 网络 1.1. 推荐书籍 《计算机网络》 《图解HTTP》 《网络是怎样连接的》 By onlycc            updated 2020-12-04 20:10:15 "},"network/浏览器生成消息.html":{"url":"network/浏览器生成消息.html","title":"浏览器生成消息","keywords":"","body":"1. 网络协议1.1. 不同的网络协议1.1.1. 浏览器访问一个链接的步骤1. 网络协议 1.1. 不同的网络协议 URL: Uniform Resource Locator，统一资源定位符 URI: Uniform Resource Indentifier，统一资源标识符 访问时使用的协议类型： HTTP协议（Hypertext Tranfer Protocol 超文本传送协议） 访问Web服务器 FTP协议 下载和上传文件 file 读取客户端计算机本地文件 mailto 发送电子邮件 1.1.1. 浏览器访问一个链接的步骤 第一步： 对URL进行解析，从而生成发送到Web服务器的请求消息。 浏览器使用HTTP协议来访问Web服务器 http: + // + web服务器名 + / + 目录名 + / ... + 文件名 省略文件名：大多数情况是访问index.html或者default.htm之类的文件名 省略路径/ ：访问根目录下的默认文件 一个请求中只能写1个URI，如果需要获取多个文件，必须对每个文件单独发送1条请求。 HTTP协议定义了客户端和服务器之间交互的消息内容和步骤。请求消息中包含的内容是：对什么 + 进行怎样的操作 两个部分。 对什么：URI（访问目标统称为URI） 进行怎样的操作：方法 HTTP1.1: GET/POST/HEAD/DELETE/PUT/OPTIONS/CONNECT/TRACE HTTP1.0: GET/POST/HEAD/DELETE/PUT Web服务器收到消息后会对其中的内容进行解析，通过对URI和方法来判断对什么进行怎样的操作，然后将结果放进响应消息中。 HTTP状态码 -1xx 告知请求的处理监督和情况 -2xx 成功 -3xx 表示需要进一步操作 -4xx 客户端错误 -5xx 服务器错误 HTTP消息有严格的格式规定，浏览器会按照规定的格式来生成请求消息。 请求消息 : ... ... 响应消息 : ... ... 第二步: 向DNS服务器查询Web服务器的IP地址 浏览器具备能够解析网址并生成HTTP消息，但是不具备将消息发送到网络中的功能，这个发送消息的功能委托给操作系统来实现。在委托操作系统发送消息时，必须要提供IP地址。 在网络中所有的设备都会被分配一个地址IP地址，通过IP地址我们可以判断出访问对象服务器的位置，从而发送消息到服务器。 路由器：一种对包进行转发的设备。（内置了集线器的功能） 集线器：一种对包进行转发的设备，分为中继式集线器和交换式集线器。 互联网和公司内部的局域网都是基于TCP/IP的思路来设计的。集线器连接起来的所有设备都属于同一个子网。子网通过路由器连接起来就形成了一个网络。 发送者发出的消息首先经过子网中的集线器，转发到距离发送者最近的路由器上。 路由器会根据消息的目的地进行判断下一个路由器的位置，然后将消息发送到下一个路由器。不断重复，最终消息被传送到了目的地址。 IPv4 地址是一个32bit的数字，按照8bit为一组（一个字节）分成4组，分别用十进制表示，然后用圆点隔开。IP地址是分配给了按照了网络的硬件，如果一台设备安装了多个网络硬件就有多个IP地址。 网络号和主机号连起来总共是32bit，两部分的具体结构不是固定的。在组件网络时，用户可以自行决定它们之间的分配关系。需要附加信息来表示IP地址的内部结构（子网掩码）。 子网掩码中的为1的部分表示网络号，为0的部分表示主机号。 IP地址的主机号： 全0 表示整个子网；全1 表示向子网所有设备发送包，即广播。 使用IP地址长度固定32bit，使用域名可能很长，长度不固定，会增加路由器的负担。 DNS域名解析 DNS: Domain Name System，域名服务系统，将服务器和IP地址进行关联是DNS最常见的用法。 解析器实际上是一段程序，它包含在操作系统的Socket库中。库就是一堆通用程序组件的集合。 Socket库是同于调用网络功能的程序组件集合,Socket是网络开发中的一种标准库。 Socket库是加州大学伯克利分校开发的UNIX系操作系统BSD中开发的C语言库，互联网中所使用的大多数功能都是基于Socket库开发的。 浏览器会使用Socket库中的解析器，调用解析器后，解析器会向DNS服务器发送查询消息，然后DNS服务器会返回响应消息，包含查询到的IP地址，解析器会读取IP地址，将其写入浏览器的内存地址中。 浏览器向Web服务器发送消息时，只要从内存地址中读取IP地址，并将它与HTTP请求消息一起交给操作系统就可以了。 向DNS发送消息时也需要知道DNS服务器的IP地址。这个IP地址是作为TCP/IP的一个设置项目事先设置好的，不需要去查询。 DNS工作原理 来自客户端的查询消息包含：域名、Class（识别网络信息，互联易只有：IN）、记录类型（A，Address的缩写：域名对应的是IP地址；MX：域名对应的是邮件服务器） 记录类型还有其他的：根据IP地址反查询域名的PTR类型，查询域名相关别名的CNAME类型，查询DNS服务器IP地址的NS类型，查询域名属性信息的SOA类型。 只要注册了A类型的记录，都可以作为服务器的域名来使用 DNS服务器会从域名与IP地址的对照表中查询相应的记录，并返回IP地址。 DNS服务器将信息分布保存在多台DNS服务器中，这些DNS服务器会相互接力配合，从而查找出要查询的信息。DNS服务器中的所有信息都是按照域名以分层次的结构来保存的。 www.example.com 越靠右边的位置表示的层级越高。每个域都是作为一个整体来处理的，一个域的信息是作为一个整体存在DNS服务器中的。一台DNS服务器可以管理多个域的信息。 查找要访问的Web服务器的信息归那一台DNS服务器 将下级域的DNS服务器的IP地址注册到上一级的DNS服务器中，这样我们就可以通过上级的DNS服务器查询出下级DNS服务器的IP地址，就可以向下级DNS服务器发送查询请求了。 |-.根域 - com - example - www 根域DNS服务器保存在互联网中的所有的DNS服务器。分配给根域DNS服务器的IP地址在全世界只有13个，而且这些地址几乎不会发生变化。 DNS查询步骤： 客户端访问最近的一台DNS服务器； 由于最近的DNS服务器中没有存在查询的域名的信息，我们需要从顶层开始向下查找。 根域服务器判断属于com域，返回com域的DNS服务器的IP地址； com域服务器返回example.com域的DNS服务器的IP地址； ...客户端知道了Web服务器的IP地址 DNS服务器有一个缓存的功能，查询的域名在存在缓存中，可以直接返回响应。缓存有有效期。 第三步：委托协议栈发送消息 通过DNS服务器查询到IP地址后，可以委托操作系统内部的协议栈向目标IP发送消息。需要使用Socket库中的程序组件。发送的是数字信息。 向操作系统内部的协议栈发出委托时，需要按照指定的顺序来调用Socket库中的程序组件。 进行收发数据操作之前，双方需要先建立管道。管道两端的数据的出入口（套接字）。我们需要先创建套接字，然后再将套接字连接起来形成管道。 服务器程序一般会在启动后就创建好套接字并等待客户端来连接管道。管道的连接是由客户端发起的，但是在断开时可以由客户端和服务端任何一方发起。管道断开后，套接字也会被删除。 收发数据 操作系统中的协议栈来执行 创建套接字 创建阶段：调用Socket库中的socket程序组件，执行创建套接字操作，返回一个描述符识别某个特定的套接字。 将管道连接到服务端的套接字上 连接阶段：需要委托协议栈将客户端创建的套接字与服务器那边的套接字链接起来。使用Socket库中的connect的程序组件，需要描述符，服务器IP和端口号3个参数。 端口号：是用来让通信的另一方能够识别出套接字的机制。服务器上所使用的端口号是根据应用的种类事先规定好的。 Web是80，邮件是25端口。 描述符：应用程序用来识别套接字的机制。 IP和端口：客户端和服务器之间用来识别对方套接字的机制。 收发数据 通信阶段：通过Socket库委托协议栈，使用write这个程序组件。 在内存中准备要发送的数据：浏览器生成的HTTP请求消息。 调用write时：指导描述符和发送的数据。协议栈将数据发送到服务器。 接收消息：是Socket库中的read程序组件委托协议栈来完成的。调用read时，指定存放接收到的响应消息的内存地址（接受缓冲区，位于应用程序的内存空间） 断开管道并删除套接字 断开阶段：调用Socket库的close程序组件。 在每个阶段，Socket库中的程序组件都会被调用来执行相关的数据收发操作。 By onlycc            updated 2020-12-12 20:45:25 "},"network/协议栈和网卡.html":{"url":"network/协议栈和网卡.html","title":"协议栈和网卡","keywords":"","body":"1. 电信号传输TCP/IP数据1.1. 创建套接字1.1.1. 协议栈的内部结构1.1.2. 套接字1. 电信号传输TCP/IP数据 1.1. 创建套接字 1.1.1. 协议栈的内部结构 操作系统中的网络控制软件（协议栈）和网络硬件（网卡） 第一层：网络应用程序：浏览器、Web服务器、电子邮件服务器等 第二层：Socket库，包含解析器（用来向DNS服务器发出查询） 第三层：操作系统，包含协议栈（TCP协议、UDP协议、IP协议：ICMP协议和ARP协议）。 浏览器、邮件等一般的应用程序都是用TCP收发数据的；DNS查询等收发较短的控制数据的时候用UDP。 ICMP协议用于告知网络包传输过程中产生的错误以及各种控制消息，ARP协议用于根据IP地址查询相应的以太网MAC地址。 第四层：网卡驱动程序，负责控制网卡硬件。 第五层：网卡，负责实际的收发操作，对网线中的信号执行发送和接收的操作。 1.1.2. 套接字 协议栈内部有一块用于存放控制信息的内存空间，记录了用于控制通信操作的控制信息：通信对象的IP地址、端口号、操作系统的进行状态等。 协议栈是根据套接字中记录的控制信息来工作的。windows中可以是用netstat -ano查看套接字的内容。 DNS解析 内存地址/IP地址=gethostbyname(...) Socket库中的解析器 UDP模块 IP模块 DNS服务器 浏览器通过Socket库向协议栈发出委托的一系列操作 TCP模块 IP模块 Web服务器 创建套接字：=socket(,...) 首先分配一个套接字所需的内存空间，然后向其写入初始状态，然后返回描述符（区分协议栈中的多个套接字的号码牌） 连接：connect(,,...) 连接操作的第一步是在TCP模块处创建表示连接控制信息的头部。然后TCP模块把信息传递给IP模块并委托它进行发送。 传递给协议栈中的TCP模块，然后TCP模块会与服务器的TCP模块交换控制信息。 调用connect，协议栈将本地的套接字和服务器的套接字进行连接。连接实际上是通信双方交换控制信息，在套接字中记录这些必要信息并准备数据收发的一连串操作。 在连接节点，数据收发还没有开始，网络包中没有实际的数据，只有控制信息，这些控制信息位于网络包的开头，称为头部。（以太网和IP的控制信息，TCP的控制信息） TCP三次握手 所谓三次握手(Three-way Handshake)，是指建立一个TCP连接时，需要客户端和服务器总共发送3个包。 三次握手的目的是连接服务器指定端口，建立TCP连接，并同步连接双方的序列号和确认号并交换 TCP 窗口大小信息。在Socket编程中，客户端执行connect()时将触发三次握手。 客户端创建一个包含开始数据收发操作的控制信息的头部，客户端就准确的找到了服务端的套接字。将控制位的SYN=1，表示连接。然后TCP模块把信息传递给IP模块并委托它进行发送。网络包就会通过网络到服务器。 服务端上的IP模块将接受到的数据传递给TCP模块，然后TCP模块根据TCP头部的信息找到端口对应的套接字。找到对应的套接字之后，套接字就会写入相应的信息，把连接状态改为正在连接。 然后服务器的TCP模块返回响应，在TCP头部设置发送方和接收方的端口号以及SYN=1，ACK=1 表示已经接收到相应的网络包。 网络包返回到客户端之后，确认SYN为1表示连接成功，向套接字中写入服务器的IP和端口号，设置状态表示连接完毕。然后客户端把ACK=1并发回服务器，告诉服务器刚才的响应包已经收到了。 服务器收到返回包，连接操作建立完成。套接字两端连接建立起来了。 发送：write(...) / 接收：接受数据长度=read(...) 应用程序在进行收发消息时要提供描述符。 协议栈并不是一收到数据就马上发送出去，会将数据存放在内部的发送缓存区中，等待下一段数据。协议栈内部有一个计时器，一定时间后会把网络包发送出去。 MTU， 最大传输单元: 一个网络包的最大长度，以太网一般是1500字节。包含了头部的总长度。 MTU = 报头/起始帧分界符 + MAC头部 + IP头部 + TCP头部 + 数据 + FCS（帧校验序列） MSS，最大分段大小: 除去头部之后，一个网络包能容纳的TCP数据的最大长度。 HTTP头部+消息体， 如果长度超过网络包所能容纳的数据量。发送缓冲区的数据会被以MSS长度为单位进行拆分。 使用ACK号确认网络包已经收到 整个网络包的长度减去头部的长度就可以得到数据的长度，所以接收方可以用这种方法来进行计算。 在实际的通信中，序号并不是从1 开始的，而是需要用随机数计算出一个初始值，这是因为如果序号都从1 开始，通信过程就会非常容易预测，受到攻击。因此需要在开始收发数据之前将初始值告知通信对象。 TCP数据收发是双向的，在设置SYN=1时还要设置Seq=X设置序号的初始值。服务端也需要计算一个序号，在连接过程中互相告知对方自己的序号初始值，服务端Seq=Y。 SYN为1表示发起连接 连接操作： 1. client =(SYN=1, Seq=X)=> server 2. client server 收发操作： 4. client =(序号+数据)=> server 5. client client 7. client =(ACK号)=> server 收到数据后再返回ACK号，TCP采用这种方式确认对方是否收到了数据，在对方确认之前发生过来的包都会保存在发送缓冲区，如果对方没有返回ACK，就会重新发送这些包。 有了这个机制网卡、集线器、路由器都没有错误补偿机制，一旦检测到错误就直接丢弃相应的包。 接收HTTP响应消息 浏览器在委托协议栈发送消息之后，调用read程序来响应消息。协议栈会检查收到的数据块和TCP头部的内容，判断数据是否有丢失，没有返回ACK号，返回协议栈将数据块暂存到接收缓冲区，将数据块按照顺序连接起来还原出原始数据，交给应用程序。 断开：close()，删除套接字 完成数据发送的一方会发起断开过程，调用Socket库的close程序。 1. 服务器的协议栈会生成包含断开信息的TCP头部：FIN=1 2. 客户端收到服务器发来的FIN=1的TCP头部时，客户端的协议栈会将自己的套接字标记进入断开状态。客户端向服务端返回ACK号。 3. 客户端应用程序会调用close来结束数据收发操作。生成FIN=1的TCP包，发送给服务器。 4. 服务器返回ACK号。 客户端和服务器的通信就全部结束了。 By onlycc            updated 2020-12-13 16:11:19 "},"network/IP与以太网的包的收发.html":{"url":"network/IP与以太网的包的收发.html","title":"IP与以太网的包的收发","keywords":"","body":"1. IP与以太网的包的收发1.1. IP模块1.1.1. 通过ARP查询目标路由器的MAC地址1.1.2. 以太网1.1.3. 网卡发送信号1.2. UDP协议的收发操作1.2.1. 音频和视频数据1.2.2. 信号在网线和集线器中传输1. IP与以太网的包的收发 包的基本结构 = 头部（控制信息） + 数据 发送方的网络设备会负责创建包：生成含有正确控制信息的头部+要发送的数据。 包被发送到最近的网络转发设备，转发设备根据头部信息判断接下来要发往哪里。 ... 经过多个转发设备的接力之后，包到达了接收方的网络设备。 路由器根据目标地址判断下一个路由器的位置。路由器中有一张IP协议的表，可以根据这张表以及IP头部中记录的目的信息查出接下来要发往哪一个路由器的MAC地址，改写MAC头部。 MAC头部包含通过以太网的局域网将包传输至最近的路由器所需的控制信息。 集线器在子网中将网络包传输下一个路由。集线器是根据以太网协议工作的设备。 IP模块负责添加两个头部： MAC头部（包含MAC地址，用于以太网协议，子网中的以太网协议将包传输到下一个转发设备） IP头部（包含IP地址，用于IP协议，IP协议根据目标地址判断下一个IP转发设备的位置） 网卡的网络包有01组成的数字信息，网卡将数字信息转换为电信号或光信号，通过网线或光纤发送出去。 1.1. IP模块 IP模块接受TCP模块的委托负责包的收发工作，它会生成IP头部并附加在TCP头部前面。 IP地址是从TCP模块拿到的，TCP是从应用程序拿到的。 路由器使用路由表判断下一个路由器的位置：查询路由表 route print。 1.1.1. 通过ARP查询目标路由器的MAC地址 ARP: Address Resolution Protocol 地址解析协议 ARP利用广播对所有设备提问，这个IP地址是谁的，把MAC地址告诉我。将查询的结果放在ARP缓存中, 过几分钟会被删除。 arp -a 1.1.2. 以太网 以太网是一种为多台计算机能够彼此自由和廉价地相互通信而设计的通信技术。本质是一根网线。 现在的是使用交互式集线器，信号只会流到指定的MAC地址的设备，不会到达其他设备。 1.1.3. 网卡发送信号 网卡通电之后需要进行初始化，需要网卡驱动程度对硬件进行初始化操作，然后硬件才能进入可以使用的状态。 网卡的ROM： 保存全世界唯一的MAC地址，生产网卡时候写入的。由网卡驱动程序读取并分配给MAC模块。 网卡驱动从IP模块获取包，将其复制到网卡内的缓冲区，向MAC模块发送发包命令。 MAC模块把包从缓冲区取出，在开头加上报头和起始帧分界符，在末尾加上检测错误的帧校验序列。让0和1分别对应特定的电压和电流。 网卡的MAC模块生成通用信号，然后由PHY(MAU)模块转换为卡在网线中传输的格式，并通过网线发送出去。 1.2. UDP协议的收发操作 数据短，一个包就能装下，未送达就重发。如果对方回复数据当作接收确认。UDP的最大数据长度为65507字节，需要让IP模块使用分片功能拆分之后再传输。 UDP不需要建立和端口连接的步骤，只要从应用程序获取的数据，在前面加上UDP头部，再交给IP进行发送即可。 遇到错误和丢包一概不管，UDP只是单纯的发送包。 1.2.1. 音频和视频数据 音频和视频数据中缺少了某些包并不会产生严重的问题，只是会产生一些失真或者卡顿而已，一般都是可以接受的。在这些无需重发数据，或者重发了也没什么意义的情况下，使用UDP 发送数据的效率会更高。 1.2.2. 信号在网线和集线器中传输 集线器和交换机 每个包都是独立传输的。 局域网是用的网线是双绞线，双绞线是两根信号线纠缠在一起，为了抑制噪声。 集线器将信号发送给所有连接在它上面的线路。 交换机端口的MAC模块不具有MAC地址。 交换机根据MAC地址表查找MAC地址，然后将信号发送到相应的端口。 交换机的全双工模式可以同时发送和接收信号。 路由器 路由器根据“IP地址”判断转发目标。路由器会忽略主机号，只匹配网络号。 路由器的端口都具有MAC 地址，只接收与自身地址匹配的包，遇到不匹配的包则直接丢弃。 通过路由器转发的网络包，其接收方MAC地址为路由器端口的MAC地址。路由器会根据MAC头部后方的IP头部中的内容进行包的转发操作。 路由表中子网掩码为0.0.0.0 的记录表示“默认路由”。 路由器也会使用ARP来查询下一个转发目标的MAC地址。 IP对以太网的委只是将包传输到下一个路由器就行了，当包到达下一个路由器后，下一个路由器又重新委托以太网将包传输到再下一个路由器。 IP本身不负责包的传输，而是委托各种通信技术将包传输到下一个路由器。 地址 固定地址的分配。A公司和B公司的网络是独立的，地址出现重复就无关紧要了。 规定某些地址是用于内网，地址叫私有地址，原来的固定的地址叫作公网地址。 私有地址，在内网中可以用作私有地址的范围: 10.0.0.0 ~ 10.255.255.255 172.16.0.0 ~ 172.31.255.255 192.168.0.0 ~ 192.168.255.255 如果公司内网需要和互联网连接的时候，公司内网分成两部分： 一部分是对互联网开放的服务器； 另一部分是公司的内部设备。 其中对互联网开放的服务器分配共有地址，可以和互联网直接通信。内网部分分配私有地址，内网中的设备不能和互联网直接收发网络包，而是通过一种特别的机制进行连接，地址转换。 路由器的功能：地址转换 在转发网络包时对IP头部中的IP地址和端口号进行改写。 内网访问互联网 首先，TCP连接操作的第一个包被转发到互联网时，将发送方IP地址从私有地址改写成公有地址（地址转换设备的互联网接入端口的地址），端口号也需要进行改写，地址转换设备会随机选择一个空闲的端口。 （跳板机？） 在对外只能使用一个公有地址的情况下，可以用不同的端口号来区别内网中的不同终端。 互联网访问内网 从内网访问互联网，即使私网地址和端口号没有保存在对应表中也是可以进行正常转发的。端口号可以随机分配一个空闲的端口既可。 但是互联网访问公司内网，在对应表中没有记录就无法正常转发。放置非法入侵的效果。 By onlycc            updated 2020-12-13 20:39:36 "},"js/js.html":{"url":"js/js.html","title":"Javascript","keywords":"","body":"1. Javascript1.1. 推荐书籍1. Javascript 1.1. 推荐书籍 《你不知道的JS》上中下 《Javascript权威指南》 By onlycc            updated 2020-12-04 20:11:56 "}}